@{
    Layout = null;
}

@model Web.Areas.Employee.Models.ViewModels.SiteValuesViewModels.AddSectionType
<div class="box box-info">
    <div class="box-header ui-sortable-handle" style="cursor: move;">
        <i class="fa "></i>

        <h3 class="box-title">افزودن قسمت سایت</h3>
        <!-- tools box -->
        <div class="pull-left box-tools">
        </div>
        <!-- /. tools -->
    </div>
    <div class="box-body">
        <form action="/Employee/SiteValues/AddSectionType" method="post">
            @Html.ValidationSummary(false)
            @Html.AntiForgeryToken()
            <input type="hidden" name="parentId" value="@Model.parentId" />
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label">نام</label>
                    @Html.TextBoxFor(m => m.name, new { @class = "form-control" })
                </div>
                <div class="form-group">
                    <label class="control-label">workFlow</label>
                    @Html.CheckBoxFor(m => m.workFlow)
                </div>
                <div class="form-group">
                    <label class="control-label">فعال</label>
                    @Html.CheckBoxFor(m => m.isEnable)
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label">کد</label>
                    @Html.TextBoxFor(m => m.code, new { @class = "form-control", type = "number", step = "1", min = "0" })
                </div>
                <div class="form-group">
                    <label class="control-label">توضیحات</label>
                    @Html.TextAreaFor(m => m.description, new { @class = "form-control" })
                </div>
            </div>
            <div class="clearfix"></div>
            <button class="btn btn-success">ثبت</button>
        </form>
    </div>
</div>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>
    $(function () {
        jQuery.post('/Employee/SiteValues/GetMaxCodeWithParentByAjax',
            { parentId: @Model.parentId },
            function(value) {
                $('input[type=number]#code').val(value);
                //$('input[type=number]#code').attr("min", 0);
            });
    })
</script>
